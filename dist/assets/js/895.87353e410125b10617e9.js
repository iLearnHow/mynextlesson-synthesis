"use strict";(self.webpackChunkmynextlesson_synthesis=self.webpackChunkmynextlesson_synthesis||[]).push([[895],{895:function(e,t,n){n.d(t,{CalendarOverlay:function(){return i}});var a=n(626),r=n(651),s=n(452);class i{constructor(){this.isVisible=!1,this.isReady=!1,this.currentMonth=(new Date).getMonth(),this.currentYear=(new Date).getFullYear(),this.selectedDay=null,this.eventListeners=new Map,this.overlay=null,this.calendar=null,this.monthSelector=null,this.yearSelector=null,this.daysGrid=null,this.closeButton=null}async initialize(){try{a.Vy.info("calendar_overlay_init","Initializing calendar overlay"),this.createOverlay(),this.setupEventListeners(),this.initializeCurrentDate(),this.isReady=!0,a.Vy.info("calendar_overlay_ready","Calendar overlay initialized successfully")}catch(e){throw r.zc.handle(e,{context:"calendar_overlay",phase:"initialization"}),e}}createOverlay(){this.overlay=document.createElement("div"),this.overlay.className="calendar-overlay",this.overlay.setAttribute("role","dialog"),this.overlay.setAttribute("aria-label","Lesson Calendar"),this.overlay.setAttribute("aria-modal","true"),this.calendar=document.createElement("div"),this.calendar.className="calendar-container";const e=this.createHeader(),t=this.createSelectors();this.daysGrid=this.createDaysGrid(),this.closeButton=this.createCloseButton(),this.calendar.appendChild(e),this.calendar.appendChild(t),this.calendar.appendChild(this.daysGrid),this.calendar.appendChild(this.closeButton),this.overlay.appendChild(this.calendar),document.body.appendChild(this.overlay),this.applyStyles()}createHeader(){const e=document.createElement("div");return e.className="calendar-header",e.innerHTML="\n            <h2>Choose Your Lesson</h2>\n            <p>Select any day of the year to start learning</p>\n        ",e}createSelectors(){const e=document.createElement("div");e.className="calendar-selectors",this.monthSelector=document.createElement("select"),this.monthSelector.className="month-selector",this.monthSelector.setAttribute("aria-label","Select month");["January","February","March","April","May","June","July","August","September","October","November","December"].forEach((e,t)=>{const n=document.createElement("option");n.value=t,n.textContent=e,this.monthSelector.appendChild(n)}),this.yearSelector=document.createElement("select"),this.yearSelector.className="year-selector",this.yearSelector.setAttribute("aria-label","Select year");const t=(new Date).getFullYear();for(let e=t;e<=t+10;e++){const t=document.createElement("option");t.value=e,t.textContent=e,this.yearSelector.appendChild(t)}const n=document.createElement("div");return n.className="calendar-nav",n.innerHTML='\n            <button class="nav-btn prev-btn" aria-label="Previous month">\n                <svg viewBox="0 0 24 24" width="24" height="24">\n                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>\n                </svg>\n            </button>\n            <button class="nav-btn next-btn" aria-label="Next month">\n                <svg viewBox="0 0 24 24" width="24" height="24">\n                    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>\n                </svg>\n            </button>\n        ',e.appendChild(this.monthSelector),e.appendChild(this.yearSelector),e.appendChild(n),e}createDaysGrid(){const e=document.createElement("div");e.className="calendar-grid",e.setAttribute("role","grid"),e.setAttribute("aria-label","Calendar days");const t=document.createElement("div");t.className="calendar-headers",t.setAttribute("role","row");["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(e=>{const n=document.createElement("div");n.className="calendar-header-cell",n.setAttribute("role","columnheader"),n.textContent=e,t.appendChild(n)}),e.appendChild(t);const n=document.createElement("div");return n.className="calendar-days",n.setAttribute("role","rowgroup"),e.appendChild(n),e}createCloseButton(){const e=document.createElement("button");return e.className="calendar-close",e.setAttribute("aria-label","Close calendar"),e.innerHTML='\n            <svg viewBox="0 0 24 24" width="24" height="24">\n                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n            </svg>\n        ',e}applyStyles(){const e=`\n            .calendar-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(0, 0, 0, 0.5);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 1000;\n                opacity: 0;\n                visibility: hidden;\n                transition: all 0.3s ease;\n            }\n            \n            .calendar-overlay.visible {\n                opacity: 1;\n                visibility: visible;\n            }\n            \n            .calendar-container {\n                background: ${s.$.get("ui.theme.background")};\n                border-radius: 12px;\n                padding: 24px;\n                max-width: 500px;\n                width: 90%;\n                max-height: 80vh;\n                overflow-y: auto;\n                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n                transform: scale(0.9);\n                transition: transform 0.3s ease;\n            }\n            \n            .calendar-overlay.visible .calendar-container {\n                transform: scale(1);\n            }\n            \n            .calendar-header {\n                text-align: center;\n                margin-bottom: 20px;\n            }\n            \n            .calendar-header h2 {\n                margin: 0 0 8px 0;\n                color: ${s.$.get("ui.theme.text")};\n                font-size: 24px;\n                font-weight: 700;\n            }\n            \n            .calendar-header p {\n                margin: 0;\n                color: #64748b;\n                font-size: 14px;\n            }\n            \n            .calendar-selectors {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                margin-bottom: 20px;\n                justify-content: center;\n            }\n            \n            .month-selector,\n            .year-selector {\n                padding: 8px 12px;\n                border: 2px solid #e2e8f0;\n                border-radius: 6px;\n                background: white;\n                font-size: 14px;\n                cursor: pointer;\n                transition: border-color 0.2s ease;\n            }\n            \n            .month-selector:focus,\n            .year-selector:focus {\n                outline: none;\n                border-color: ${s.$.get("ui.theme.primary")};\n            }\n            \n            .calendar-nav {\n                display: flex;\n                gap: 8px;\n            }\n            \n            .nav-btn {\n                background: ${s.$.get("ui.theme.primary")};\n                color: white;\n                border: none;\n                border-radius: 6px;\n                width: 36px;\n                height: 36px;\n                cursor: pointer;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                transition: all 0.2s ease;\n            }\n            \n            .nav-btn:hover {\n                background: ${s.$.get("ui.theme.accent")};\n                transform: scale(1.05);\n            }\n            \n            .nav-btn svg {\n                fill: currentColor;\n            }\n            \n            .calendar-grid {\n                border: 1px solid #e2e8f0;\n                border-radius: 8px;\n                overflow: hidden;\n            }\n            \n            .calendar-headers {\n                display: grid;\n                grid-template-columns: repeat(7, 1fr);\n                background: #f8fafc;\n                border-bottom: 1px solid #e2e8f0;\n            }\n            \n            .calendar-header-cell {\n                padding: 12px 8px;\n                text-align: center;\n                font-weight: 600;\n                font-size: 12px;\n                color: #64748b;\n                text-transform: uppercase;\n            }\n            \n            .calendar-days {\n                display: grid;\n                grid-template-columns: repeat(7, 1fr);\n            }\n            \n            .calendar-day {\n                aspect-ratio: 1;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border: 1px solid #f1f5f9;\n                cursor: pointer;\n                font-size: 14px;\n                font-weight: 500;\n                transition: all 0.2s ease;\n                position: relative;\n            }\n            \n            .calendar-day:hover {\n                background: #f0f9ff;\n                color: ${s.$.get("ui.theme.primary")};\n            }\n            \n            .calendar-day.selected {\n                background: ${s.$.get("ui.theme.primary")};\n                color: white;\n            }\n            \n            .calendar-day.today {\n                background: ${s.$.get("ui.theme.accent")};\n                color: white;\n                font-weight: 700;\n            }\n            \n            .calendar-day.other-month {\n                color: #cbd5e1;\n                cursor: not-allowed;\n            }\n            \n            .calendar-day.lesson-available::after {\n                content: '';\n                position: absolute;\n                bottom: 4px;\n                left: 50%;\n                transform: translateX(-50%);\n                width: 4px;\n                height: 4px;\n                background: ${s.$.get("ui.theme.success")};\n                border-radius: 50%;\n            }\n            \n            .calendar-close {\n                position: absolute;\n                top: 16px;\n                right: 16px;\n                background: none;\n                border: none;\n                cursor: pointer;\n                padding: 8px;\n                border-radius: 50%;\n                transition: background-color 0.2s ease;\n            }\n            \n            .calendar-close:hover {\n                background: #f1f5f9;\n            }\n            \n            .calendar-close svg {\n                fill: #64748b;\n            }\n            \n            .calendar-day-info {\n                position: absolute;\n                bottom: 100%;\n                left: 50%;\n                transform: translateX(-50%);\n                background: #1e293b;\n                color: white;\n                padding: 8px 12px;\n                border-radius: 6px;\n                font-size: 12px;\n                white-space: nowrap;\n                opacity: 0;\n                visibility: hidden;\n                transition: all 0.2s ease;\n                z-index: 10;\n            }\n            \n            .calendar-day-info::after {\n                content: '';\n                position: absolute;\n                top: 100%;\n                left: 50%;\n                transform: translateX(-50%);\n                border: 4px solid transparent;\n                border-top-color: #1e293b;\n            }\n            \n            .calendar-day:hover .calendar-day-info {\n                opacity: 1;\n                visibility: visible;\n            }\n            \n            @media (max-width: 768px) {\n                .calendar-container {\n                    padding: 16px;\n                    margin: 16px;\n                }\n                \n                .calendar-selectors {\n                    flex-direction: column;\n                    gap: 8px;\n                }\n                \n                .calendar-day {\n                    font-size: 12px;\n                }\n            }\n        `;if(!document.getElementById("calendar-overlay-styles")){const t=document.createElement("style");t.id="calendar-overlay-styles",t.textContent=e,document.head.appendChild(t)}}setupEventListeners(){this.monthSelector.addEventListener("change",()=>{this.currentMonth=parseInt(this.monthSelector.value),this.renderCalendar()}),this.yearSelector.addEventListener("change",()=>{this.currentYear=parseInt(this.yearSelector.value),this.renderCalendar()});const e=this.calendar.querySelector(".prev-btn"),t=this.calendar.querySelector(".next-btn");e.addEventListener("click",()=>this.previousMonth()),t.addEventListener("click",()=>this.nextMonth()),this.closeButton.addEventListener("click",()=>this.hide()),this.overlay.addEventListener("click",e=>{e.target===this.overlay&&this.hide()}),document.addEventListener("keydown",e=>{if(this.isVisible)switch(e.code){case"Escape":e.preventDefault(),this.hide();break;case"ArrowLeft":e.preventDefault(),this.previousMonth();break;case"ArrowRight":e.preventDefault(),this.nextMonth()}}),this.eventListeners.set("monthSelector",this.monthSelector),this.eventListeners.set("yearSelector",this.yearSelector),this.eventListeners.set("prevBtn",e),this.eventListeners.set("nextBtn",t),this.eventListeners.set("closeBtn",this.closeButton),this.eventListeners.set("overlay",this.overlay)}initializeCurrentDate(){const e=new Date;this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.monthSelector.value=this.currentMonth,this.yearSelector.value=this.currentYear,this.renderCalendar()}renderCalendar(){const e=this.calendar.querySelector(".calendar-days");e.innerHTML="";const t=new Date(this.currentYear,this.currentMonth,1),n=(new Date(this.currentYear,this.currentMonth+1,0),new Date(t));n.setDate(n.getDate()-t.getDay());const r=new Date,s=this.currentMonth===r.getMonth()&&this.currentYear===r.getFullYear();for(let t=0;t<42;t++){const a=new Date(n);a.setDate(n.getDate()+t);const i=this.createDayElement(a,{isCurrentMonth:a.getMonth()===this.currentMonth,isToday:s&&a.getDate()===r.getDate(),isSelected:this.selectedDay&&this.isSameDay(a,this.selectedDay)});e.appendChild(i)}a.Vy.info("calendar_overlay_rendered",`Calendar rendered for ${this.getMonthName(this.currentMonth)} ${this.currentYear}`)}createDayElement(e,t){const n=document.createElement("div");n.className="calendar-day",n.setAttribute("role","gridcell"),n.setAttribute("aria-label",`${this.getMonthName(e.getMonth())} ${e.getDate()}, ${e.getFullYear()}`);const a=e.getDate();if(n.textContent=a,t.isCurrentMonth||n.classList.add("other-month"),t.isToday&&n.classList.add("today"),t.isSelected&&n.classList.add("selected"),this.isLessonAvailable(e)&&n.classList.add("lesson-available"),t.isCurrentMonth){const t=this.createDayTooltip(e);n.appendChild(t),n.addEventListener("click",()=>{this.selectDay(e)})}return n}createDayTooltip(e){const t=document.createElement("div");t.className="calendar-day-info";const n=this.getDayOfYear(e);return t.textContent=`Day ${n} - Lesson Available`,t}isLessonAvailable(e){if(e.getMonth()!==this.currentMonth)return!1;const t=this.getDayOfYear(e);return t>=1&&t<=366}getDayOfYear(e){const t=new Date(e.getFullYear(),0,0),n=e-t;return Math.floor(n/864e5)}isSameDay(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}getMonthName(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}selectDay(e){this.selectedDay=e,this.renderCalendar();const t=this.getDayOfYear(e),n=new CustomEvent("calendar:daySelected",{detail:{date:e,dayOfYear:t,month:e.getMonth(),year:e.getFullYear()}});window.dispatchEvent(n),setTimeout(()=>this.hide(),300),a.Vy.info("calendar_overlay_selected",`Day ${t} selected`)}previousMonth(){0===this.currentMonth?(this.currentMonth=11,this.currentYear--):this.currentMonth--,this.monthSelector.value=this.currentMonth,this.yearSelector.value=this.currentYear,this.renderCalendar()}nextMonth(){11===this.currentMonth?(this.currentMonth=0,this.currentYear++):this.currentMonth++,this.monthSelector.value=this.currentMonth,this.yearSelector.value=this.currentYear,this.renderCalendar()}show(){this.isVisible=!0,this.overlay.classList.add("visible"),this.overlay.setAttribute("aria-hidden","false"),this.closeButton.focus(),document.body.style.overflow="hidden",a.Vy.info("calendar_overlay_shown","Calendar overlay displayed")}hide(){this.isVisible=!1,this.overlay.classList.remove("visible"),this.overlay.setAttribute("aria-hidden","true"),document.body.style.overflow="",a.Vy.info("calendar_overlay_hidden","Calendar overlay hidden")}toggle(){this.isVisible?this.hide():this.show()}getStatus(){return{isReady:this.isReady,isVisible:this.isVisible,currentMonth:this.currentMonth,currentYear:this.currentYear,selectedDay:this.selectedDay?{date:this.selectedDay.toISOString(),dayOfYear:this.getDayOfYear(this.selectedDay)}:null}}async shutdown(){a.Vy.info("calendar_overlay_shutdown","Shutting down calendar overlay"),this.isVisible&&this.hide(),this.eventListeners.forEach((e,t)=>{if(e&&e.removeEventListener)switch(t){case"monthSelector":case"yearSelector":e.removeEventListener("change",()=>this.renderCalendar());break;case"prevBtn":e.removeEventListener("click",()=>this.previousMonth());break;case"nextBtn":e.removeEventListener("click",()=>this.nextMonth());break;case"closeBtn":e.removeEventListener("click",()=>this.hide());break;case"overlay":e.removeEventListener("click",e=>{e.target===this.overlay&&this.hide()})}}),this.overlay&&this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay),this.isReady=!1,a.Vy.info("calendar_overlay_shutdown_complete","Calendar overlay shutdown complete")}}}}]);