<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collapsible Menu Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f0f0f0; }
        .test { background: white; padding: 20px; margin: 15px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .success { background: #d4edda; color: #155724; padding: 10px; border-radius: 4px; margin: 10px 0; }
        .error { background: #f8d7da; color: #721c24; padding: 10px; border-radius: 4px; margin: 10px 0; }
        .warning { background: #fff3cd; color: #856404; padding: 10px; border-radius: 4px; margin: 10px 0; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        iframe { width: 100%; height: 600px; border: 1px solid #ccc; border-radius: 4px; }
        .demo { display: flex; gap: 20px; margin: 20px 0; }
        .demo-section { background: #f8f9fa; padding: 20px; border-radius: 8px; }
        .demo-icon { width: 60px; height: 60px; background: white; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 20px; margin: 10px 0; position: relative; gap: 2px; padding: 4px; }
        .demo-icon.secondary { width: 50px; height: 50px; font-size: 18px; }
        .demo-icon .icon-emoji { font-size: 20px; }
        .demo-icon.secondary .icon-emoji { font-size: 18px; }
        .demo-icon .icon-label { font-size: 9px; color: #666; font-weight: 500; text-align: center; line-height: 1; }
        .demo-icon.secondary .icon-label { font-size: 8px; }
    </style>
</head>
<body>
    <h1>üì± Collapsible Menu Test</h1>
    
    <div class="test">
        <h2>‚úÖ Test 1: Collapsible Menu Implementation</h2>
        <p><strong>Status:</strong> <span id="menu-status">Checking...</span></p>
        <p><strong>Expected:</strong> Menu system with primary and secondary controls</p>
    </div>
    
    <div class="test">
        <h2>‚úÖ Test 2: Primary Controls (Always Visible)</h2>
        <p><strong>Status:</strong> <span id="primary-status">Checking...</span></p>
        <p><strong>Expected:</strong> Talk, Hold, Menu buttons always visible and larger</p>
    </div>
    
    <div class="test">
        <h2>‚úÖ Test 3: Secondary Controls (Hidden by Default)</h2>
        <p><strong>Status:</strong> <span id="secondary-status">Checking...</span></p>
        <p><strong>Expected:</strong> Volume and speed controls hidden until menu opens</p>
    </div>
    
    <div class="test">
        <h2>‚úÖ Test 4: Navigation Icons (Hidden by Default)</h2>
        <p><strong>Status:</strong> <span id="nav-status">Checking...</span></p>
        <p><strong>Expected:</strong> Side navigation hidden until menu opens</p>
    </div>
    
    <div class="test">
        <h2>‚úÖ Test 5: Icon Updates</h2>
        <p><strong>Status:</strong> <span id="icon-status">Checking...</span></p>
        <p><strong>Expected:</strong> Variants removed, Create updated, proper sizing</p>
    </div>
    
    <div class="test">
        <h2>üß™ Demo: Collapsible Menu Structure</h2>
        <p>This demo shows the new menu structure:</p>
        <div class="demo">
            <div class="demo-section">
                <h3>Primary Controls (Always Visible)</h3>
                <div class="demo-icon">
                    <div class="icon-emoji">üó£Ô∏è</div>
                    <div class="icon-label">Talk</div>
                </div>
                <div class="demo-icon">
                    <div class="icon-emoji">‚úã</div>
                    <div class="icon-label">Hold</div>
                </div>
                <div class="demo-icon">
                    <div class="icon-emoji">‚ò∞</div>
                    <div class="icon-label">Menu</div>
                </div>
            </div>
            <div class="demo-section">
                <h3>Secondary Controls (Hidden by Default)</h3>
                <div class="demo-icon secondary">
                    <div class="icon-emoji">üîä</div>
                    <div class="icon-label">Louder</div>
                </div>
                <div class="demo-icon secondary">
                    <div class="icon-emoji">üîá</div>
                    <div class="icon-label">Softer</div>
                </div>
                <div class="demo-icon secondary">
                    <div class="icon-emoji">üêå</div>
                    <div class="icon-label">Slower</div>
                </div>
                <div class="demo-icon secondary">
                    <div class="icon-emoji">‚ö°</div>
                    <div class="icon-label">Faster</div>
                </div>
                <div class="demo-icon secondary">
                    <div class="icon-emoji">üîÑ</div>
                    <div class="icon-label">Repeat</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test">
        <h2>üß™ Live Interface Test</h2>
        <p>Test the collapsible menu in the live interface:</p>
        <button onclick="openLiveTest()">Open Live Interface Test</button>
        <div id="live-test"></div>
    </div>

    <script>
        async function runTests() {
            console.log('üì± Running collapsible menu tests...');
            
            // Test 1: Check for collapsible menu implementation
            try {
                const response = await fetch('http://localhost:8000/');
                const html = await response.text();
                
                const hasPrimaryControls = html.includes('control-btn primary');
                const hasSecondaryControls = html.includes('secondary-controls');
                const hasMenuBtn = html.includes('menu-btn');
                const hasToggleMenu = html.includes('toggleMenu()');
                
                if (hasPrimaryControls && hasSecondaryControls && hasMenuBtn && hasToggleMenu) {
                    document.getElementById('menu-status').textContent = '‚úÖ PASSED - Collapsible menu implemented';
                    document.getElementById('menu-status').className = 'success';
                } else {
                    document.getElementById('menu-status').textContent = '‚ùå FAILED - Collapsible menu missing';
                    document.getElementById('menu-status').className = 'error';
                }
            } catch (error) {
                document.getElementById('menu-status').textContent = '‚ùå ERROR - ' + error.message;
                document.getElementById('menu-status').className = 'error';
            }
            
            // Test 2: Check for primary controls
            try {
                const response = await fetch('http://localhost:8000/');
                const html = await response.text();
                
                const hasTalkPrimary = html.includes('control-btn primary') && html.includes('data-label="Talk"');
                const hasHoldPrimary = html.includes('control-btn primary') && html.includes('data-label="Hold"');
                const hasMenuBtn = html.includes('menu-btn') && html.includes('data-label="Menu"');
                
                if (hasTalkPrimary && hasHoldPrimary && hasMenuBtn) {
                    document.getElementById('primary-status').textContent = '‚úÖ PASSED - Primary controls present';
                    document.getElementById('primary-status').className = 'success';
                } else {
                    document.getElementById('primary-status').textContent = '‚ùå FAILED - Primary controls missing';
                    document.getElementById('primary-status').className = 'error';
                }
            } catch (error) {
                document.getElementById('primary-status').textContent = '‚ùå ERROR - ' + error.message;
                document.getElementById('primary-status').className = 'error';
            }
            
            // Test 3: Check for secondary controls
            try {
                const response = await fetch('http://localhost:8000/');
                const html = await response.text();
                
                const hasSecondaryControls = html.includes('secondary-controls');
                const hasLouder = html.includes('data-label="Louder"');
                const hasSofter = html.includes('data-label="Softer"');
                const hasSlower = html.includes('data-label="Slower"');
                const hasFaster = html.includes('data-label="Faster"');
                const hasRepeat = html.includes('data-label="Repeat"');
                
                if (hasSecondaryControls && hasLouder && hasSofter && hasSlower && hasFaster && hasRepeat) {
                    document.getElementById('secondary-status').textContent = '‚úÖ PASSED - Secondary controls present';
                    document.getElementById('secondary-status').className = 'success';
                } else {
                    document.getElementById('secondary-status').textContent = '‚ùå FAILED - Secondary controls missing';
                    document.getElementById('secondary-status').className = 'error';
                }
            } catch (error) {
                document.getElementById('secondary-status').textContent = '‚ùå ERROR - ' + error.message;
                document.getElementById('secondary-status').className = 'error';
            }
            
            // Test 4: Check for navigation icons
            try {
                const response = await fetch('http://localhost:8000/');
                const html = await response.text();
                
                const hasSideNavigation = html.includes('side-navigation') && html.includes('style="display: none;"');
                const hasCalendar = html.includes('data-label="Calendar"');
                const hasTone = html.includes('data-label="Tone"');
                const hasAvatar = html.includes('data-label="Avatar"');
                const hasLanguage = html.includes('data-label="Language"');
                const hasAge = html.includes('data-label="Age"');
                const hasCreate = html.includes('data-label="Create"');
                
                if (hasSideNavigation && hasCalendar && hasTone && hasAvatar && hasLanguage && hasAge && hasCreate) {
                    document.getElementById('nav-status').textContent = '‚úÖ PASSED - Navigation icons present';
                    document.getElementById('nav-status').className = 'success';
                } else {
                    document.getElementById('nav-status').textContent = '‚ùå FAILED - Navigation icons missing';
                    document.getElementById('nav-status').className = 'error';
                }
            } catch (error) {
                document.getElementById('nav-status').textContent = '‚ùå ERROR - ' + error.message;
                document.getElementById('nav-status').className = 'error';
            }
            
            // Test 5: Check for icon updates
            try {
                const response = await fetch('http://localhost:8000/');
                const html = await response.text();
                
                const noVariants = !html.includes('data-label="Variants"');
                const hasCreate = html.includes('data-label="Create"');
                const hasGreenPlus = html.includes('color: #28a745');
                const hasPrimarySize = html.includes('width: 60px') && html.includes('height: 60px');
                
                if (noVariants && hasCreate && hasGreenPlus && hasPrimarySize) {
                    document.getElementById('icon-status').textContent = '‚úÖ PASSED - Icon updates complete';
                    document.getElementById('icon-status').className = 'success';
                } else {
                    document.getElementById('icon-status').textContent = '‚ùå FAILED - Icon updates incomplete';
                    document.getElementById('icon-status').className = 'error';
                }
            } catch (error) {
                document.getElementById('icon-status').textContent = '‚ùå ERROR - ' + error.message;
                document.getElementById('icon-status').className = 'error';
            }
        }
        
        function openLiveTest() {
            const testDiv = document.getElementById('live-test');
            testDiv.innerHTML = `
                <h3>üß™ Live Interface Test</h3>
                <p><strong>Test Instructions:</strong></p>
                <ol>
                    <li>Wait for the page to load completely</li>
                    <li>Verify only Talk, Hold, and Menu buttons are visible initially</li>
                    <li>Click the Menu button (‚ò∞) to show all controls</li>
                    <li>Click the Hold button (‚úã) to also toggle the menu</li>
                    <li>Verify secondary controls and navigation appear/disappear</li>
                    <li>Check that primary controls are larger than secondary controls</li>
                </ol>
                <p><strong>Expected Behavior:</strong></p>
                <ul>
                    <li>Initial state: Only Talk, Hold, Menu visible</li>
                    <li>Menu opens: Shows all secondary controls and navigation</li>
                    <li>Primary controls: 60px diameter, larger</li>
                    <li>Secondary controls: 50px diameter, standard size</li>
                    <li>Navigation: Hidden by default, appears with menu</li>
                </ul>
                <iframe src="http://localhost:8000/" title="Collapsible Menu Test"></iframe>
            `;
        }
        
        // Run tests on page load
        window.addEventListener('load', runTests);
    </script>
</body>
</html> 