<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple-Quality Overlay System Test</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .test-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        .avatar-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -1;
        }

        .avatar-container.ken-active {
            background-image: url('/lesson-player-deploy/assets/avatars/ken/ken_neutral_default.png');
        }

        .avatar-container.kelly-active {
            background-image: url('/lesson-player-deploy/assets/avatars/kelly/kelly_neutral_default.png');
        }

        .test-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            color: white;
        }

        .test-controls button {
            background: #007AFF;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }

        .test-controls button:hover {
            background: #0056CC;
        }

        .status {
            margin-top: 10px;
            font-size: 14px;
        }

        .side-navigation {
            position: absolute;
            top: 20px;
            right: 40px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 5;
        }

        .nav-icon {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            color: white;
            font-size: 18px;
            cursor: pointer;
            backdrop-filter: blur(12px);
            transition: all 0.3s ease;
        }

        .nav-icon:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .nav-icon.active {
            background: #007AFF;
        }

        /* Apple-Quality Overlay System Styles */
        .apple-quality-overlay {
            position: fixed;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            color: white;
            z-index: 1000;
            transform: translate(0, 0);
            transition: all 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .overlay-content {
            padding: 20px;
            text-align: center;
        }

        .overlay-content h3 {
            margin-bottom: 16px;
            font-size: 18px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }

        .control-group {
            margin-bottom: 16px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .control-group button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            margin: 4px;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .control-group button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .control-group button.active {
            background: #007AFF;
        }

        .control-group input[type="range"] {
            width: 100%;
            margin: 8px 0;
        }

        .control-group select {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            width: 100%;
        }

        .control-group input[type="checkbox"] {
            margin-right: 8px;
        }

        .age-display {
            display: block;
            margin-top: 8px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .calendar-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .calendar-nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .calendar-day {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .calendar-day.today {
            background: #007AFF;
        }

        .calendar-day.available {
            background: rgba(0, 122, 255, 0.3);
        }

        .calendar-day.unavailable {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div id="avatar-container" class="avatar-container kelly-active"></div>
        
        <div class="test-controls">
            <h3>Apple-Quality Overlay System Test</h3>
            <button onclick="testSpeakerControls()">Test üîä Speaker</button>
            <button onclick="testToneControls()">Test üé≠ Tone</button>
            <button onclick="testLanguageControls()">Test üåç Language</button>
            <button onclick="testAvatarControls()">Test üë§ Avatar</button>
            <button onclick="testAgeControls()">Test üìä Age</button>
            <button onclick="testCalendarControls()">Test üìÖ Calendar</button>
            <button onclick="testHamburgerMenu()">Test ‚ò∞ Menu</button>
            <button onclick="testFaceSafe()">Test Face-Safe</button>
            <button onclick="testAutoClose()">Test Auto-Close</button>
            <div class="status" id="status">Status: Ready for testing</div>
        </div>

        <!-- Side Navigation -->
        <div class="side-navigation">
            <button class="nav-icon" data-section="controls">üîä</button>
            <button class="nav-icon" data-section="tone">üé≠</button>
            <button class="nav-icon" data-section="language">üåç</button>
            <button class="nav-icon" data-section="avatar">üë§</button>
            <button class="nav-icon" data-section="age">üìä</button>
            <button class="nav-icon" data-section="calendar">üìÖ</button>
            <button class="nav-icon" data-section="menu">‚ò∞</button>
        </div>

        <!-- Apple-Quality Overlay System Containers -->
        <div id="speaker-controls-overlay" class="apple-quality-overlay" style="display: none;">
            <div class="overlay-content">
                <h3>üîä Audio Controls</h3>
                <div class="control-group">
                    <label>Volume</label>
                    <input type="range" min="0" max="100" value="100" class="volume-slider">
                </div>
                <div class="control-group">
                    <label>Speed</label>
                    <select class="speed-select">
                        <option value="0.5">0.5x</option>
                        <option value="1" selected>1x</option>
                        <option value="1.25">1.25x</option>
                        <option value="1.5">1.5x</option>
                        <option value="2">2x</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Autoplay</label>
                    <input type="checkbox" class="autoplay-toggle" checked>
                </div>
            </div>
        </div>

        <div id="tone-controls-overlay" class="apple-quality-overlay" style="display: none;">
            <div class="overlay-content">
                <h3>üé≠ Tone Selection</h3>
                <div class="control-group">
                    <button class="tone-btn" data-tone="neutral">Neutral</button>
                    <button class="tone-btn" data-tone="fun">Fun</button>
                    <button class="tone-btn" data-tone="grandmother">Grandmother</button>
                </div>
            </div>
        </div>

        <div id="language-controls-overlay" class="apple-quality-overlay" style="display: none;">
            <div class="overlay-content">
                <h3>üåç Language Selection</h3>
                <div class="control-group">
                    <button class="language-btn" data-language="english">English</button>
                    <button class="language-btn" data-language="spanish">Spanish</button>
                    <button class="language-btn" data-language="french">French</button>
                    <button class="language-btn" data-language="german">German</button>
                    <button class="language-btn" data-language="italian">Italian</button>
                    <button class="language-btn" data-language="portuguese">Portuguese</button>
                </div>
            </div>
        </div>

        <div id="avatar-controls-overlay" class="apple-quality-overlay" style="display: none;">
            <div class="overlay-content">
                <h3>üë§ Avatar Selection</h3>
                <div class="control-group">
                    <button class="avatar-btn" data-avatar="kelly">Kelly</button>
                    <button class="avatar-btn" data-avatar="ken">Ken</button>
                </div>
            </div>
        </div>

        <div id="age-controls-overlay" class="apple-quality-overlay" style="display: none;">
            <div class="overlay-content">
                <h3>üìä Age Group</h3>
                <div class="control-group">
                    <input type="range" min="6" max="80" value="18" class="age-slider">
                    <span class="age-display">18 years</span>
                </div>
            </div>
        </div>

        <div id="calendar-controls-overlay" class="apple-quality-overlay" style="display: none;">
            <div class="overlay-content">
                <h3>üìÖ Lesson Calendar</h3>
                <div class="calendar-nav">
                    <button class="calendar-nav-btn" onclick="previousMonth()">‚Äπ</button>
                    <span id="current-month-display">August 2025</span>
                    <button class="calendar-nav-btn" onclick="nextMonth()">‚Ä∫</button>
                </div>
                <div id="calendar-grid-display" class="calendar-grid">
                    <!-- Calendar days will be populated here -->
                </div>
            </div>
        </div>

        <div id="hamburger-menu-overlay" class="apple-quality-overlay" style="display: none;">
            <div class="overlay-content">
                <h3>‚ò∞ Menu</h3>
                <div class="control-group">
                    <button class="menu-btn" data-action="about">About</button>
                    <button class="menu-btn" data-action="help">Help</button>
                    <button class="menu-btn" data-action="settings">Settings</button>
                    <button class="menu-btn" data-action="upgrade">Upgrade</button>
                </div>
            </div>
        </div>
    </div>

    <script src="apple-quality-overlay-system.js"></script>
    <script>
        let currentAvatar = 'Kelly';
        let currentTone = 'neutral';
        let currentLanguage = 'english';
        let currentAge = '18';

        // Test functions
        function testSpeakerControls() {
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.toggleOverlay('speaker-controls');
                updateStatus('Testing speaker controls overlay');
            } else {
                updateStatus('Apple-Quality Overlay System not loaded');
            }
        }

        function testToneControls() {
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.toggleOverlay('tone-controls');
                updateStatus('Testing tone controls overlay');
            } else {
                updateStatus('Apple-Quality Overlay System not loaded');
            }
        }

        function testLanguageControls() {
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.toggleOverlay('language-controls');
                updateStatus('Testing language controls overlay');
            } else {
                updateStatus('Apple-Quality Overlay System not loaded');
            }
        }

        function testAvatarControls() {
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.toggleOverlay('avatar-controls');
                updateStatus('Testing avatar controls overlay');
            } else {
                updateStatus('Apple-Quality Overlay System not loaded');
            }
        }

        function testAgeControls() {
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.toggleOverlay('age-controls');
                updateStatus('Testing age controls overlay');
            } else {
                updateStatus('Apple-Quality Overlay System not loaded');
            }
        }

        function testCalendarControls() {
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.toggleOverlay('calendar-controls');
                updateStatus('Testing calendar controls overlay');
            } else {
                updateStatus('Apple-Quality Overlay System not loaded');
            }
        }

        function testHamburgerMenu() {
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.toggleOverlay('hamburger-menu');
                updateStatus('Testing hamburger menu overlay');
            } else {
                updateStatus('Apple-Quality Overlay System not loaded');
            }
        }

        function testFaceSafe() {
            updateStatus('Testing face-safe positioning...');
            // Simulate avatar change
            currentAvatar = currentAvatar === 'Kelly' ? 'Ken' : 'Kelly';
            const avatarContainer = document.getElementById('avatar-container');
            avatarContainer.classList.remove('ken-active', 'kelly-active');
            if (currentAvatar === 'Ken') {
                avatarContainer.classList.add('ken-active');
            } else {
                avatarContainer.classList.add('kelly-active');
            }
            
            // Trigger face-safe zone update
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.updateFaceSafeZones(currentAvatar.toLowerCase());
            }
            
            updateStatus(`Avatar changed to ${currentAvatar}, face-safe zones updated`);
        }

        function testAutoClose() {
            updateStatus('Testing auto-close behavior...');
            // Open a tone control (should auto-close after 2 seconds)
            if (window.AppleQualityOverlaySystem) {
                window.AppleQualityOverlaySystem.openOverlay('tone-controls');
                updateStatus('Tone controls opened - will auto-close in 2 seconds');
            }
        }

        function updateStatus(message) {
            document.getElementById('status').textContent = `Status: ${message}`;
            console.log(`üß™ Test: ${message}`);
        }

        // Navigation event listeners
        document.querySelectorAll('.nav-icon').forEach(btn => {
            btn.addEventListener('click', function() {
                const section = this.dataset.section;
                document.querySelectorAll('.nav-icon').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                if (window.AppleQualityOverlaySystem) {
                    switch(section) {
                        case 'controls':
                            window.AppleQualityOverlaySystem.toggleOverlay('speaker-controls');
                            break;
                        case 'tone':
                            window.AppleQualityOverlaySystem.toggleOverlay('tone-controls');
                            break;
                        case 'language':
                            window.AppleQualityOverlaySystem.toggleOverlay('language-controls');
                            break;
                        case 'avatar':
                            window.AppleQualityOverlaySystem.toggleOverlay('avatar-controls');
                            break;
                        case 'age':
                            window.AppleQualityOverlaySystem.toggleOverlay('age-controls');
                            break;
                        case 'calendar':
                            window.AppleQualityOverlaySystem.toggleOverlay('calendar-controls');
                            break;
                        case 'menu':
                            window.AppleQualityOverlaySystem.toggleOverlay('hamburger-menu');
                            break;
                    }
                }
            });
        });

        // Control event listeners
        document.querySelectorAll('.tone-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tone = this.dataset.tone;
                currentTone = tone;
                this.parentElement.querySelectorAll('.tone-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                updateStatus(`Tone changed to: ${tone}`);
            });
        });

        document.querySelectorAll('.language-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const language = this.dataset.language;
                currentLanguage = language;
                this.parentElement.querySelectorAll('.language-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                updateStatus(`Language changed to: ${language}`);
            });
        });

        document.querySelectorAll('.avatar-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const avatar = this.dataset.avatar;
                currentAvatar = avatar === 'ken' ? 'Ken' : 'Kelly';
                this.parentElement.querySelectorAll('.avatar-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Update avatar display
                const avatarContainer = document.getElementById('avatar-container');
                avatarContainer.classList.remove('ken-active', 'kelly-active');
                if (currentAvatar === 'Ken') {
                    avatarContainer.classList.add('ken-active');
                } else {
                    avatarContainer.classList.add('kelly-active');
                }
                
                updateStatus(`Avatar changed to: ${currentAvatar}`);
            });
        });

        const ageSlider = document.querySelector('.age-slider');
        const ageDisplay = document.querySelector('.age-display');
        if (ageSlider && ageDisplay) {
            ageSlider.addEventListener('input', function() {
                const age = this.value;
                ageDisplay.textContent = `${age} years`;
                currentAge = age;
                updateStatus(`Age changed to: ${age}`);
            });
        }

        // Initialize
        window.addEventListener('load', () => {
            updateStatus('Apple-Quality Overlay System test ready');
            console.log('üß™ Apple-Quality Overlay System test initialized');
        });
    </script>
</body>
</html> 